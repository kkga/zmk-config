/*                KEY POSITIONS
  ╭────────────────────╮ ╭────────────────────╮
  │  0   1   2   3   4 │ │  5   6   7   8   9 │
  │ 10  11  12  13  14 │ │ 15  16  17  18  19 │
  │ 20  21  22  23  24 │ │ 25  26  27  28  29 │
  ╰───────────╮ 30  31 │ │ 32  33 ╭───────────╯
              ╰────────╯ ╰────────╯            */

compatible = "zmk,combos";

#define BASE QWR CLM

#define COMBO(NAME, BINDINGS, KEYPOS, LAYERS, TERM) \
  combo_##NAME { \
    timeout-ms = <TERM>; \
    bindings = <BINDINGS>; \
    key-positions = <KEYPOS>; \
    layers = <LAYERS>; \
  };

// Symbols
// brackets: middle column
COMBO(lbrc,            &kp LBRC,              3  4,    BASE, 60)
COMBO(rbrc,            &kp RBRC,              5  6,    BASE, 60)
COMBO(lpar,            &kp LPAR,             13 14,    BASE, 60)
COMBO(rpar,            &kp RPAR,             15 16,    BASE, 60)
COMBO(lbkt,            &kp LBKT,             23 24,    BASE, 60)
COMBO(rbkt,            &kp RBKT,             25 26,    BASE, 60)
COMBO(lt,              &kp LT,                4 14,    BASE, 60)
COMBO(gt,              &kp GT,                5 15,    BASE, 60)
// misc: right hand 2-finger
COMBO(colon,           &kp COLON,             6  7,    BASE, 60)
COMBO(equal,           &kp EQUAL,          6  7  8,    BASE, 60)
COMBO(under,           &kp UNDER,             7  8,    BASE, 60)
COMBO(bslh,            &kp BSLH,             28 29,    BASE, 60)
COMBO(pipe,            &kp PIPE,             27 28,    BASE, 60)

// Layers (for one-handed use)
COMBO(layer_nav,       &mo NAV,              33 19,    BASE, 80)

// Big keys
COMBO(bspc_l,          &kp BSPC,              1  2,    BASE, 40)
COMBO(ret_l,           &kp RET,              22 23,    BASE, 40)
COMBO(ret_r,           &kp RET,              26 27,    BASE, 40)

// Navigation
COMBO(pg_up,           &kp PG_UP,             7 17,     NAV, 40)
COMBO(pg_dn,           &kp PG_DN,             6 16,     NAV, 40)
COMBO(home,            &kp HOME,              5 15,     NAV, 40)
COMBO(end,             &kp END,               8 18,     NAV, 40)
COMBO(menu,            &kp K_APP,             8 9,      NAV, 40)

// System
COMBO(capswd,          &caps_word,           13 16,     NAV, 80)
COMBO(copy_mac,        &kp LG(C),            21 22,     NAV, 80)
COMBO(paste_mac,       &kp LG(V),            22 23,     NAV, 80)
COMBO(cut_mac,         &kp LG(X),            21 23,     NAV, 80)
COMBO(launch_mac,      &kp LG(SPACE),     11 12 13,     NAV, 80)
COMBO(back_mac,        &kp LG(LBKT),          1  2,     NAV, 80)
COMBO(fwd_mac,         &kp LG(RBKT),          2  3,     NAV, 80)
COMBO(menu_search,     &kp LG(LS(SLASH)),    28 29,     NAV, 80)
COMBO(undo_mac,        &kp LG(Z),            20 21,     NAV, 80)
COMBO(redo_mac,        &kp LG(LS(Z)),        23 24,     NAV, 80)

// Firmware
// outer column + non-homing thumb
COMBO(reset_left,      &reset,             0 10 20,    BASE, 60)
COMBO(reset_right,     &reset,             9 19 29,    BASE, 60)
COMBO(boot_left,       &bootloader,     30 0 10 20,    BASE, 60)
COMBO(boot_right,      &bootloader,     33 9 19 29,    BASE, 60)


// vim:ft=c
